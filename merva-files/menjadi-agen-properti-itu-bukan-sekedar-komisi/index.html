<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Menjadi Agen Properti Itu Bukan Sekedar Komisi - Merva</title><meta name="description" content="Ini adalah kisah saya pribadi. Ternyata berbisnis bukanlah sekedar keterampilan teknis. Ada&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://merva.biz.id/menjadi-agen-properti-itu-bukan-sekedar-komisi/"><link rel="alternate" type="application/atom+xml" href="https://merva.biz.id/feed.xml" title="Merva - RSS"><link rel="alternate" type="application/json" href="https://merva.biz.id/feed.json" title="Merva - JSON"><meta property="og:title" content="Menjadi Agen Properti Itu Bukan Sekedar Komisi - Merva "><meta property="og:image" content="https://merva.biz.id/media/posts/4/pexels-thelazyartist-1642125.jpg"><meta property="og:image:width" content="3992"><meta property="og:image:height" content="2242"><meta property="og:site_name" content="Merva"><meta property="og:description" content="Ini adalah kisah saya pribadi. Ternyata berbisnis bukanlah sekedar keterampilan teknis. Ada&hellip;"><meta property="og:url" content="https://merva.biz.id/menjadi-agen-properti-itu-bukan-sekedar-komisi/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@merva_indonesia"><meta name="twitter:title" content="Menjadi Agen Properti Itu Bukan Sekedar Komisi - Merva "><meta name="twitter:description" content="Ini adalah kisah saya pribadi. Ternyata berbisnis bukanlah sekedar keterampilan teknis. Ada&hellip;"><meta name="twitter:image" content="https://merva.biz.id/media/posts/4/pexels-thelazyartist-1642125.jpg"><link rel="shortcut icon" href="https://merva.biz.id/media/website/apple-touch-icon.png" type="image/png"><link rel="preload" href="https://merva.biz.id/assets/dynamic/fonts/publicsans/publicsans.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://merva.biz.id/assets/css/style.css?v=81e981439dff3181421530daf1b22e9d"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://merva.biz.id/menjadi-agen-properti-itu-bukan-sekedar-komisi/"},"headline":"Menjadi Agen Properti Itu Bukan Sekedar Komisi","datePublished":"2024-12-07T13:44+07:00","dateModified":"2025-03-30T21:55+07:00","image":{"@type":"ImageObject","url":"https://merva.biz.id/media/posts/4/pexels-thelazyartist-1642125.jpg","height":2242,"width":3992},"description":"Ini adalah kisah saya pribadi. Ternyata berbisnis bukanlah sekedar keterampilan teknis. Ada&hellip;","author":{"@type":"Person","name":"Eka Maharta","url":"https://merva.biz.id/authors/eka-maharta/"},"publisher":{"@type":"Organization","name":"Eka Maharta","logo":{"@type":"ImageObject","url":"https://merva.biz.id/media/website/M-removebg-preview.png","height":500,"width":500}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-WHPGWBG9QY"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WHPGWBG9QY');</script><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1168359120826236');
fbq('track', 'PageView');</script><noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1168359120826236&ev=PageView&noscript=1"></noscript></head><body class="post-template"><div class="container"><div class="left-bar"><div class="left-bar__inner"><header class="header"><a class="logo" href="https://merva.biz.id/"><img src="https://merva.biz.id/media/website/M-removebg-preview.png" alt="Merva" width="500" height="500"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle__box"><span class="navbar__toggle__inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://merva.biz.id/" target="_self" aria-label="Home"><span>Home</span></a></li><li><a href="https://merva.biz.id/e-book/" target="_self" aria-label="E-Book"><span>E-Book</span></a></li><li><a href="https://merva.biz.id/kursus/" target="_self" aria-label="Kursus"><span>Kursus</span></a></li><li><a href="https://merva.biz.id/hubungi-kami/" target="_self" aria-label="Kontak"><span>Kontak</span></a></li><li><a href="https://merva.biz.id/tentang-merva/" target="_self" aria-label="Tentang Merva"><span>Tentang Merva</span></a></li></ul></nav><a class="logo logo--atbottom" href="https://merva.biz.id/"><img src="https://merva.biz.id/media/website/M-removebg-preview.png" alt="Merva" width="500" height="500"></a></header></div></div><main class="main post"><article class="content"><figure class="content__featured-image content__featured-image--attop"><img src="https://merva.biz.id/media/posts/4/pexels-thelazyartist-1642125.jpg" srcset="https://merva.biz.id/media/posts/4/responsive/pexels-thelazyartist-1642125-xs.webp 320w, https://merva.biz.id/media/posts/4/responsive/pexels-thelazyartist-1642125-sm.webp 480w, https://merva.biz.id/media/posts/4/responsive/pexels-thelazyartist-1642125-md.webp 768w, https://merva.biz.id/media/posts/4/responsive/pexels-thelazyartist-1642125-xl.webp 1024w" sizes="(min-width: 1460px) 938px, (min-width: 1200px) calc(75.83vw - 154px), (min-width: 1120px) 938px, (min-width: 900px) calc(55vw + 333px), 100vw" loading="eager" height="2242" width="3992" alt="Images of real estate" aria-describedby="image-caption"></figure><div class="main__inner"><header class="content__header"><h1 class="content__title">Menjadi Agen Properti Itu Bukan Sekedar Komisi</h1></header><div class="content__entry"><p><br>Ini adalah kisah saya pribadi. Ternyata berbisnis bukanlah sekedar keterampilan teknis. Ada banyak hal lain yang terlibat disini. Setelah jatuh dalam aneka bisnis saya memulai semuanya kembali dengan menjadi agen properti.</p><p>Lalu apa cara paling cepat memulai bisnis properti? Pengusaha berbeda akan menjawab hal yang berbeda. Tapi bagi saya pasti ada cara untuk mulai masuk ke dunia properti, dari "0".  Tanpa modal, tanpa pengetahuan, tanpa keterampilan, tapi dengan resiko minimal tapi tetap aman dan bisa membawa banyak keuntungan. Caranya adalah dengan menjadi agen properti.<br><br>Tentu saja saya tak mengatakan dengan menjadi agen properti hari ini, besok anda akan kaya raya. Ada proses disini, ada kerja keras, ada integritas, ada keterampilan yang harus dilatih. Ada banyak hal yang harus dipahami, dikuasai, diasah.<br><br>Hard skill seperti membuat iklan dan mencari listing, sudah pasti harus dilatih. Tapi soft skill seperti negosiasi, komunikasi juga harus dilatih. Cuma itu? Belum! Masih ada mindset yang harus diperbaiki. Menjadi agen properti bukan cara kaya dengan cepat dan mudah.  Ada sangat banyak tantangan.  Setelah mindset terus selesai? Belum!<br><br>Dari pengalaman saya masih ada lagi yang jauh lebih dalam dari mindset, yaitu pikiran bawah sadar, pikiran tidak sadar, dan belief system. Apa maksudnya? Manusia memiliki 2 jenis pikiran: sadar dan bawah sadar. Ini bukan teori karangan saya, tapi dari Carl Jung, salah satu peletak dasar psikologi moderen. Di Indonesia, ini dikembangkan dengan sangat baik oleh Dr. Dr. Adhi W Gunawan, salah satu hipnoterapis klinis terbaik yang pernah dimiliki di negri ini.<br><br>Lalu apa hubungannya dengan agen properti? Sederhananya begini, kalau pikiran bawah sadar anda meyakini profesi agen properti itu adalah profesi rendahan, remeh dan nista, maka hampir pasti anda akan kesulitan menjadi agen properti profesional dengan hasil besar.<br><br>Keyakinan negatif seperti contoh diatas seringkali didapat dari lingkungan, dari keluarga, terutama saat kecil sebelum berumur 8 tahun. Tapi keyakinan ini terbawa hingga dewasa dan menentukan hampir segala hal dalam hidup. Semuanya tanpa disadari. <br><br>Ini adalah salah satu hal yang sangat mempengaruhi rejeki, closing, atau profit sebagai pengusaha. Tentu bukan sekedar menjadi agen properti, tapi juga usaha apapun dan profesi apapun. <br><br>Jadi dari hard skill, soft skill, mindset, dan subconcious mind atau pikiran bawah sadar, semuanya harus selaras. Dua yang pertama yaitu hard skill dan soft skill ternyata hal yang paling mudah dipelari tapi ironisnya paling kecil pengaruhnya. Lucunya dua hal ini paling sering digembar gemborkan, dan dilatih habis-habisan. <br><br>Sementara mindset dan subconcious adalah dua hal yang paling sulit dikenali, diperbaiki dan ditingkatkan. Tapi pengaruhnya kalau menurut pengalaman saya adalah 95% dari keseluruhan. Dan ini sangat jarang kalau tidak tak pernah disentuh kantor properti manapun.<br><br>Ini  menjelaskan mengapa seorang agen properti tradisional alias makelar tanah yang bekerja tanpa pelatihan, tanpa merek besar, tanpa sistem apapun bisa mendapatkan hasil yang besar.  Ini karena mindset, subconcious mind  dan sikap yang tepat. Walau mungkin memiliki hard skill dan softskill yang biasa saja.<br><br>Sebaliknya seorang agen properti yang bergabung dengan merek besar, jaringan nasional, dukungan teknologi canggih dan sebagainya tetap kesulitan mendapatkan hasil. Ini salah satunya karena alam bawah sadar, subconious mind dan mindset tadi. <br><br>Mengapa ini penting dibahas di artikel ini? Karena profesi seperti agen properti, agen asuransi, sales, dan profesi lain yang murni berbasis komisi cendrung sangat dipengaruhi oleh "nasib, garis tangan, rejeki" dan sejenisnya.<br><br>Nah, ini semua sesungguhnya datang dari alam bawah sadar. Tak ada yang klenik atau gaib disini. Semuanya kembali ke diri masing-masing. Kembali kepada kebiasaan berbicara, kebiasaan emosi, kebiasaan bertindak, kebiasaan berpikir, yang semuanya dibentuk oleh alam bawah sadar.<br><br><a href="https://www.pexels.com/photo/aerial-view-of-buildigns-1642125/">Photo by The Lazy Artist Gallery</a></p></div><footer class="content__footer"><div class="content__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmerva.biz.id%2Fmenjadi-agen-properti-itu-bukan-sekedar-komisi%2F" class="js-share facebook tltp tltp--top" aria-label="Facebook" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fmerva.biz.id%2Fmenjadi-agen-properti-itu-bukan-sekedar-komisi%2F&amp;via=merva_indonesia&amp;text=Menjadi%20Agen%20Properti%20Itu%20Bukan%20Sekedar%20Komisi" class="js-share twitter tltp tltp--top" aria-label="Twitter" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span> </a><a href="https://pinterest.com/pin/create/button/?url=https%3A%2F%2Fmerva.biz.id%2Fmenjadi-agen-properti-itu-bukan-sekedar-komisi%2F&amp;media=https%3A%2F%2Fmerva.biz.id%2Fmedia%2Fposts%2F4%2Fpexels-thelazyartist-1642125.jpg&amp;description=Menjadi%20Agen%20Properti%20Itu%20Bukan%20Sekedar%20Komisi" class="js-share pinterest tltp tltp--top" aria-label="Pinterest" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#pinterest"/></svg> <span>Pinterest</span> </a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fmerva.biz.id%2Fmenjadi-agen-properti-itu-bukan-sekedar-komisi%2F" class="js-share linkedin tltp tltp--top" aria-label="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://api.whatsapp.com/send?text=Menjadi%20Agen%20Properti%20Itu%20Bukan%20Sekedar%20Komisi https%3A%2F%2Fmerva.biz.id%2Fmenjadi-agen-properti-itu-bukan-sekedar-komisi%2F" class="js-share whatsapp tltp tltp--top" title="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div></footer></div></article></main><div class="right-bar"><div class="right-bar__inner"><div class="sidebar"><section class="box featured"><h3 class="box__title">Featured Posts</h3><ul class="featured__container"><li class="featured__item"><a href="https://merva.biz.id/5-hal-tak-terduga-yang-bisa-dilakukan-ai/" class="featured__image"><img src="https://merva.biz.id/media/posts/30/responsive/pexels-ron-lach-9783353-xs.webp" loading="lazy" alt="" height="3589" width="3589"></a><div><a href="https://merva.biz.id/5-hal-tak-terduga-yang-bisa-dilakukan-ai/" class="featured__title">5 Hal  Tak Terduga yang Bisa Dilakukan  AI</a></div></li><li class="featured__item"><a href="https://merva.biz.id/7-situs-dengan-template-website-gratis/" class="featured__image"><img src="https://merva.biz.id/media/posts/28/responsive/laptop-2411303_640-xs.webp" loading="lazy" alt="photo website" height="427" width="427"></a><div><a href="https://merva.biz.id/7-situs-dengan-template-website-gratis/" class="featured__title">7 Situs Dengan Template Website Gratis</a></div></li><li class="featured__item"><a href="https://merva.biz.id/30-situs-foto-bebas-hak-cipta-alias-gratis-tahun-2025/" class="featured__image"><img src="https://merva.biz.id/media/posts/27/responsive/photos-7666143_640-xs.webp" loading="lazy" alt="stock photo" height="426" width="426"></a><div><a href="https://merva.biz.id/30-situs-foto-bebas-hak-cipta-alias-gratis-tahun-2025/" class="featured__title">30 Situs Foto Bebas Hak Cipta alias Gratis Tahun 2025</a></div></li><li class="featured__item"><a href="https://merva.biz.id/7-hosting-untuk-bikin-website-gratis-bisa-pakai-domain-sendiri/" class="featured__image"><img src="https://merva.biz.id/media/posts/26/responsive/pexels-pixabay-461073-xs.webp" loading="lazy" alt="Photo sebuah website" height="3485" width="3485"></a><div><a href="https://merva.biz.id/7-hosting-untuk-bikin-website-gratis-bisa-pakai-domain-sendiri/" class="featured__title">7 Hosting  untuk Bikin Website Gratis (Bisa Pakai Domain Sendiri)</a></div></li><li class="featured__item"><a href="https://merva.biz.id/inilah-4-jenis-produk-digital-yang-cepat-bikin-cuan/" class="featured__image"><img src="https://merva.biz.id/media/posts/25/responsive/pexels-markusspiske-1089438-xs.webp" loading="lazy" alt="Foto gambaran biner" height="3840" width="3840"></a><div><a href="https://merva.biz.id/inilah-4-jenis-produk-digital-yang-cepat-bikin-cuan/" class="featured__title">Inilah 4 Jenis Produk Digital yang Cepat Bikin Cuan</a></div></li></ul></section><div class="box follow"><a href="https://web.facebook.com/mervaindonesia" class="tltp tltp--top" aria-label="Facebook"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://instagram.com/merva.indonesia" class="tltp tltp--top" aria-label="Instagram"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#instagram"/></svg> <span>Instagram</span></a></div><div class="box copyright">Merva Indonesia Copyright 2024</div></div></div></div></div><script defer="defer" src="https://merva.biz.id/assets/js/scripts.min.js?v=b2d91bcadbf5db401b76eb5bb3092eb7"></script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality.</div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && (!cbConfig.initialLsState || cbConfig.initialLsState.indexOf(allowedGroup) === -1)) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('🍪 GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>