<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Mengapa Produk dan Pasar Itu Perlu Fokus - Merva</title><meta name="description" content="Blog ini sudah saya buat beberapa tahun yang lalu. Dibuat karena saya&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://merva.biz.id/mengapa-produk-dan-pasar-itu-perlu-fokus/"><link rel="alternate" type="application/atom+xml" href="https://merva.biz.id/feed.xml" title="Merva - RSS"><link rel="alternate" type="application/json" href="https://merva.biz.id/feed.json" title="Merva - JSON"><meta property="og:title" content="Mengapa Produk dan Pasar Itu Perlu Fokus - Merva "><meta property="og:image" content="https://merva.biz.id/media/posts/20/pexels-mikhail-nilov-6620426.jpg"><meta property="og:image:width" content="6000"><meta property="og:image:height" content="3376"><meta property="og:site_name" content="Merva"><meta property="og:description" content="Blog ini sudah saya buat beberapa tahun yang lalu. Dibuat karena saya&hellip;"><meta property="og:url" content="https://merva.biz.id/mengapa-produk-dan-pasar-itu-perlu-fokus/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@merva_indonesia"><meta name="twitter:title" content="Mengapa Produk dan Pasar Itu Perlu Fokus - Merva "><meta name="twitter:description" content="Blog ini sudah saya buat beberapa tahun yang lalu. Dibuat karena saya&hellip;"><meta name="twitter:image" content="https://merva.biz.id/media/posts/20/pexels-mikhail-nilov-6620426.jpg"><link rel="shortcut icon" href="https://merva.biz.id/media/website/apple-touch-icon.png" type="image/png"><link rel="preload" href="https://merva.biz.id/assets/dynamic/fonts/publicsans/publicsans.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://merva.biz.id/assets/css/style.css?v=81e981439dff3181421530daf1b22e9d"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://merva.biz.id/mengapa-produk-dan-pasar-itu-perlu-fokus/"},"headline":"Mengapa Produk dan Pasar Itu Perlu Fokus","datePublished":"2025-04-04T18:08+07:00","dateModified":"2025-04-10T06:49+07:00","image":{"@type":"ImageObject","url":"https://merva.biz.id/media/posts/20/pexels-mikhail-nilov-6620426.jpg","height":3376,"width":6000},"description":"Blog ini sudah saya buat beberapa tahun yang lalu. Dibuat karena saya&hellip;","author":{"@type":"Person","name":"Eka Maharta","url":"https://merva.biz.id/authors/eka-maharta/"},"publisher":{"@type":"Organization","name":"Eka Maharta","logo":{"@type":"ImageObject","url":"https://merva.biz.id/media/website/M-removebg-preview.png","height":500,"width":500}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template"><div class="container"><div class="left-bar"><div class="left-bar__inner"><header class="header"><a class="logo" href="https://merva.biz.id/"><img src="https://merva.biz.id/media/website/M-removebg-preview.png" alt="Merva" width="500" height="500"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle__box"><span class="navbar__toggle__inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://merva.biz.id/" target="_self" aria-label="Home"><span>Home</span></a></li><li><a href="https://merva.biz.id/e-book/" target="_self" aria-label="E-Book"><span>E-Book</span></a></li><li><a href="https://merva.biz.id/kursus/" target="_self" aria-label="Kursus"><span>Kursus</span></a></li><li><a href="https://merva.biz.id/hubungi-kami/" target="_self" aria-label="Kontak"><span>Kontak</span></a></li><li><a href="https://merva.biz.id/tentang-merva/" target="_self" aria-label="Tentang Merva"><span>Tentang Merva</span></a></li></ul></nav><a class="logo logo--atbottom" href="https://merva.biz.id/"><img src="https://merva.biz.id/media/website/M-removebg-preview.png" alt="Merva" width="500" height="500"></a></header></div></div><main class="main post"><article class="content"><figure class="content__featured-image content__featured-image--attop"><img src="https://merva.biz.id/media/posts/20/pexels-mikhail-nilov-6620426.jpg" srcset="https://merva.biz.id/media/posts/20/responsive/pexels-mikhail-nilov-6620426-xs.webp 320w, https://merva.biz.id/media/posts/20/responsive/pexels-mikhail-nilov-6620426-sm.webp 480w, https://merva.biz.id/media/posts/20/responsive/pexels-mikhail-nilov-6620426-md.webp 768w, https://merva.biz.id/media/posts/20/responsive/pexels-mikhail-nilov-6620426-xl.webp 1024w" sizes="(min-width: 1460px) 938px, (min-width: 1200px) calc(75.83vw - 154px), (min-width: 1120px) 938px, (min-width: 900px) calc(55vw + 333px), 100vw" loading="eager" height="3376" width="6000" alt="Ilustrasi target" aria-describedby="image-caption"></figure><div class="main__inner"><header class="content__header"><h1 class="content__title">Mengapa Produk dan Pasar Itu Perlu Fokus</h1></header><div class="content__entry"><p>Blog ini sudah saya buat beberapa tahun yang lalu. Dibuat karena saya suka menulis. Hanya saja saya menulis apapun yang terlintas di kepala saya. Alias agak sembarangan dan loncat-loncat kesana kemari. Karena belum punya target yang jelas, kadang saya bingung harus belajar apa dan harus menulis apa. Tapi semuanya berubah ketika saya sudah punya target yang jelas. Saya tak lagi bingung harus mulai darimana. Atau menulis apa untuk siapa. Semuanya jauh lebih jelas.</p><h2>Kisahnya dimulai tahun 2022</h2><p>Tahun 2022 saya baru saja tahu satu teknologi bernama Jamstack. Sederhananya teknologi ini memungkinkan proses hosting sebuah website menjadi gratis, cepat, ringan sekaligus juga aman. Sebagai praktisi pengembang web dan kecerdasan buatan saya sangat bersemangat. Tentu saya segera mencobanya. Saya membuat beberapa website statis dengan segera. Benar saja, websitenya sangat ringan selain mudah dibuat.</p><p>Tapi saya tidak puas. Bagaimana caranya membuat sebuah blog dengan teknologi yang sama? Atau apakah teknologinya sudah ada? Saya cari di internet ternyata ada. Namanya Publii. Maka saya lakukan eksplorasi, uji coba, dan sebagainya. Dalam waktu singkat, sebuah blog dengan domain sendiri, berbasis teknologi Jamstack akhirnya terwujud. Inilah dia website yang sedang anda baca saat ini.</p><p>Cuma, karena bikinnya juga iseng-iseng, dan saya memang hobi menulis maka website inipun isinya tak karuan, tak konsisten. Saya menulis apapun yang terlintas di kepala. Fokusnya memang mulai terbentuk yaitu diseputaran bisnis. Karena saya punya beragam pengalaman jatuh bangun membangun usaha.</p><p>Hanya saja bisnis atau <em>entrepreneurship</em> merupakan bidang yang masih sangat luas. Masih perlu fokus lebih dalam lagi. Tapi kemudian kesibukan saya semakin meningkat. Utamanya karena saya menjadi lebih banyak beraktifitas sebagai pengembang kecerdasan buatan. Kembali bekerja menjadi seorang pegawai. Karena bisnis saya berantakan ulah Covid-19 tahun sebelumnya. Jadilah saya kembali murni kedunia pekerja setelah beberapa tahun mandiri sebagai pengusaha. </p><p>Dengan  waktu yang terbatas maka bisnis berikutnya yang akan saya lakukan harus sesuai dengan gaya hidup dan waktu yang saya miliki. Dengan pertimbangan itu saya putuskan untuk memulai bisnis online. Terutamanya  dengan mendalami satu aspek khusus yaitu digital marketing. Produknya akan saya pikirkan belakangan. Tapi saya ingin menguasai skillnya dulu.</p><p>Fokus blognya sudah jelas, tentang bagaimana mendalami digital marketing.  Jadi sederhananya saya menulis apa yang sudah saya pelajari dan terapkan pada kegiatan digital marketing. Apakah sudah selesai? Belum! Ternyata masih jauh. Ada fokus lain lagi yang ternyata wajib ada. Yaitu fokus target pembaca!</p><p>Ternyata fokus pada topiknya belum cukup. Dari banyak sumber saya belajar, selain topiknya ternyata harus fokus juga kepada targe pembacanya. Akhirnya saya putuskan untuk fokus kepada kelompok pembaca seperti diri saya sendiri. Yaitu para pekerja proffesional yang ingin membangun usahanya sendiri.</p><p>Jadi kalau anda adalah seorang professional yang masih bekerja dan ingin mebangun usaha dan sedang membaca blog ini, itu bukanlah hal yang aneh. Itu memang niat saya, dengan tujuan agar pengalaman dan perjalanan saya membangun usaha juga bisa berguna untuk orang lain.</p><p>Dan bukan hanya blog, fokus pada target dan topik yang sama juga saya terapkan pada beragam platform. Mulai dari Instagram, Facebook, TikTok dan X.</p><p>Apa poin dari semua cerita diatas? Untuk bisa berhasil dalam digital marketing dan bidang apapun sebaiknya memang fokus. Naval Ravikant seorang investor besar di Silicon Valley mengatakan </p><blockquote><p>Semua perusahaan raksasa hari ini dimulai dari niche market</p></blockquote><p>Bahkan perusahaan-perusahaan raksasa dan menggurita hari ini memulai semuanya dari pasar dan produk yang fokus. Tapi mengapa begitu? Itulah pertanyaan saya dulu. Dan jawabannya pun ternyata sederhana. Kita perlu fokus karena waktu, tenaga, uang, dan sumberdaya yang kita miliki terbatas. Sehingga agar bisa mendapatkan hasil yang maksimal diperlukan fokus. Baik produknya, maupun pasarnya. Itulah sebabnya. </p><p>Ini mutlak dan sangat relevan untuk mereka yang ingin memulai usahanya sambil bekerja. Intinya fokuslah pada produk dan pasar tertentu. Itulah yang saya pelajari. Itulah yang sedang saya lakukan.</p><p> </p><p><a href="https://www.pexels.com/photo/arrows-pierced-on-a-target-6620426/">Photo by Mikhail Nilov from Pexels</a> </p></div><footer class="content__footer"><div class="content__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmerva.biz.id%2Fmengapa-produk-dan-pasar-itu-perlu-fokus%2F" class="js-share facebook tltp tltp--top" aria-label="Facebook" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fmerva.biz.id%2Fmengapa-produk-dan-pasar-itu-perlu-fokus%2F&amp;via=merva_indonesia&amp;text=Mengapa%20Produk%20dan%20Pasar%20Itu%20Perlu%20Fokus" class="js-share twitter tltp tltp--top" aria-label="Twitter" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span> </a><a href="https://pinterest.com/pin/create/button/?url=https%3A%2F%2Fmerva.biz.id%2Fmengapa-produk-dan-pasar-itu-perlu-fokus%2F&amp;media=https%3A%2F%2Fmerva.biz.id%2Fmedia%2Fposts%2F20%2Fpexels-mikhail-nilov-6620426.jpg&amp;description=Mengapa%20Produk%20dan%20Pasar%20Itu%20Perlu%20Fokus" class="js-share pinterest tltp tltp--top" aria-label="Pinterest" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#pinterest"/></svg> <span>Pinterest</span> </a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fmerva.biz.id%2Fmengapa-produk-dan-pasar-itu-perlu-fokus%2F" class="js-share linkedin tltp tltp--top" aria-label="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://api.whatsapp.com/send?text=Mengapa%20Produk%20dan%20Pasar%20Itu%20Perlu%20Fokus https%3A%2F%2Fmerva.biz.id%2Fmengapa-produk-dan-pasar-itu-perlu-fokus%2F" class="js-share whatsapp tltp tltp--top" title="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div></footer></div></article><div class="content__section post__related"><div class="main__inner"><h3 class="content__section__title">Related post</h3><div class="post__related__wrap"><article class="c-card"><div class="c-card__meta"><div class="c-card__author"><a href="https://merva.biz.id/authors/eka-maharta/">Eka Maharta</a></div><time datetime="2025-04-07T07:40">Apr 7, 2025</time></div><a href="https://merva.biz.id/inilah-4-jenis-produk-digital-yang-cepat-bikin-cuan/" class="c-card__image"><img src="https://merva.biz.id/media/posts/25/pexels-markusspiske-1089438.jpg" srcset="https://merva.biz.id/media/posts/25/responsive/pexels-markusspiske-1089438-xs.webp 320w, https://merva.biz.id/media/posts/25/responsive/pexels-markusspiske-1089438-sm.webp 480w" sizes="(min-width: 700px) 200px, (min-width: 480px) 160px, calc(100vw - 50px)" loading="lazy" height="3840" width="5760" alt="Foto gambaran biner"></a><header class="c-card__header"><h2 class="c-card__title"><a href="https://merva.biz.id/inilah-4-jenis-produk-digital-yang-cepat-bikin-cuan/">Inilah 4 Jenis Produk Digital yang Cepat Bikin Cuan</a></h2><p>Apa saja jenis-jenis produk digital yang bisa dijual? Banyak yang tak paham&hellip;</p></header></article><article class="c-card"><div class="c-card__meta"><div class="c-card__author"><a href="https://merva.biz.id/authors/eka-maharta/">Eka Maharta</a></div><time datetime="2025-04-03T20:22">Apr 3, 2025</time></div><a href="https://merva.biz.id/mengapa-perlu-punya-penghasilan-sampingan/" class="c-card__image"><img src="https://merva.biz.id/media/posts/14/pexels-karolina-grabowska-5899215.jpg" srcset="https://merva.biz.id/media/posts/14/responsive/pexels-karolina-grabowska-5899215-xs.webp 320w, https://merva.biz.id/media/posts/14/responsive/pexels-karolina-grabowska-5899215-sm.webp 480w" sizes="(min-width: 700px) 200px, (min-width: 480px) 160px, calc(100vw - 50px)" loading="lazy" height="4480" width="6720" alt=""></a><header class="c-card__header"><h2 class="c-card__title"><a href="https://merva.biz.id/mengapa-perlu-punya-penghasilan-sampingan/">Mengapa Perlu Punya Penghasilan Sampingan?</a></h2><p>Sebutlah namanya Budi. Seorang senior manager perusahaan multinasional bergaji 80 juta rupiah&hellip;</p></header></article></div></div></div></main><div class="right-bar"><div class="right-bar__inner"><div class="sidebar"><section class="box featured"><h3 class="box__title">Featured Posts</h3><ul class="featured__container"><li class="featured__item"><a href="https://merva.biz.id/7-hosting-untuk-bikin-website-gratis-bisa-pakai-domain-sendiri/" class="featured__image"><img src="https://merva.biz.id/media/posts/26/responsive/pexels-pixabay-461073-xs.webp" loading="lazy" alt="Photo sebuah website" height="3485" width="3485"></a><div><a href="https://merva.biz.id/7-hosting-untuk-bikin-website-gratis-bisa-pakai-domain-sendiri/" class="featured__title">7 Hosting  untuk Bikin Website Gratis (Bisa Pakai Domain Sendiri)</a></div></li><li class="featured__item"><a href="https://merva.biz.id/inilah-4-jenis-produk-digital-yang-cepat-bikin-cuan/" class="featured__image"><img src="https://merva.biz.id/media/posts/25/responsive/pexels-markusspiske-1089438-xs.webp" loading="lazy" alt="Foto gambaran biner" height="3840" width="3840"></a><div><a href="https://merva.biz.id/inilah-4-jenis-produk-digital-yang-cepat-bikin-cuan/" class="featured__title">Inilah 4 Jenis Produk Digital yang Cepat Bikin Cuan</a></div></li><li class="featured__item"><a href="https://merva.biz.id/bagaimana-biar-bisa-konsisten/" class="featured__image"><img src="https://merva.biz.id/media/posts/24/responsive/pexels-leeloothefirst-5238670-xs.webp" loading="lazy" alt="" height="1731" width="1731"></a><div><a href="https://merva.biz.id/bagaimana-biar-bisa-konsisten/" class="featured__title">Bagaimana Biar Bisa Konsisten?</a></div></li><li class="featured__item"><a href="https://merva.biz.id/begini-caranya-agar-disiplin/" class="featured__image"><img src="https://merva.biz.id/media/posts/21/responsive/pexels-pixabay-163351-xs.webp" loading="lazy" alt="" height="4806" width="4806"></a><div><a href="https://merva.biz.id/begini-caranya-agar-disiplin/" class="featured__title">Begini Caranya Agar Disiplin</a></div></li><li class="featured__item"><a href="https://merva.biz.id/mengapa-perlu-punya-penghasilan-sampingan/" class="featured__image"><img src="https://merva.biz.id/media/posts/14/responsive/pexels-karolina-grabowska-5899215-xs.webp" loading="lazy" alt="" height="4480" width="4480"></a><div><a href="https://merva.biz.id/mengapa-perlu-punya-penghasilan-sampingan/" class="featured__title">Mengapa Perlu Punya Penghasilan Sampingan?</a></div></li></ul></section><div class="box follow"><a href="https://web.facebook.com/mervaindonesia" class="tltp tltp--top" aria-label="Facebook"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://instagram.com/merva.indonesia" class="tltp tltp--top" aria-label="Instagram"><svg><use xlink:href="https://merva.biz.id/assets/svg/svg-map.svg#instagram"/></svg> <span>Instagram</span></a></div><div class="box copyright">Merva Indonesia Copyright 2024</div></div></div></div></div><script defer="defer" src="https://merva.biz.id/assets/js/scripts.min.js?v=b2d91bcadbf5db401b76eb5bb3092eb7"></script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality.</div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && cbConfig.initialLsState.indexOf(allowedGroup) === -1) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('🍪 GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>